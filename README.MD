![godog-example-setup](https://github.com/pawelWritesCode/godog-example-setup/actions/workflows/go.yml/badge.svg)

# Example godog setup with gdutils

## Overview:

This repository contains skeleton that allow to write behaviour driven tests with use of framework [godog](https://github.com/cucumber/godog)
that implements [gherkin/cucumber](https://cucumber.io/docs/gherkin/) syntax with step library [gdutils](https://github.com/pawelWritesCode/gdutils).

## Project structure:
```

.
â”œâ”€â”€ LICENSE
â”œâ”€â”€ Makefile                - source of useful commands (make env, make download-dependencies, make clean)
â”œâ”€â”€ README.MD
â”œâ”€â”€ bin                     - binaries with simple CRUD API server, required ONLY for testing purposes
â”‚Â Â  â”œâ”€â”€ README.MD
â”‚Â Â  â”œâ”€â”€ darwin
â”‚Â Â  â”œâ”€â”€ linux
â”‚Â Â  â”œâ”€â”€ schema.yaml         - CRUD API schema - if you would like to use it somehow
â”‚Â Â  â””â”€â”€ windows
â”œâ”€â”€ defs                    - ðŸ¥’ package with implementation of godog methods(steps)
â”‚Â Â  â””â”€â”€ scenario.go         - ðŸ¥’ here add your custom methods(steps) definitions if required
â”œâ”€â”€ features                - ðŸ¥’ place for your tests (files with extensions .feature)
â”‚Â Â  â””â”€â”€ users_crud.feature  - ðŸ¥’ simple test feature, required ONLY for testing purposes
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ main_test.go            - ðŸ¥’ setup for godog  framework
â””â”€â”€ usage_1.gif
â””â”€â”€ usage_2.gif
```

## Usage:

#### Prerequisites

* globally visible `godog v0.12` CLI (`godog --version`)
* `.env` file

### First time:

![Usage example](usage_1.gif)

At first **download go packages & godog CLI**. You can do it by typing in console

```shell
make download-dependencies
```

Afterwards, `godog` CLI (represented as binary file) will be downloaded to `$GOPATH/bin` directory. This path should be added to
your `$PATH` env variable! To checks whether CLI is globally available, type:

```shell
godog --version
```

Note, that project directory should not be inside **GOPATH** !

Next, create `.env` file
```shell
make env
```

Finally, remove unnecessary files and directories âœ‚ (**run it just once**).

**Warning**: This command removes `.git/`, `.github/`, `bin/`, `usage_1.gif`, `usage_2.gif`, `.gitignore` and example test suite from `features/` dir. If you want 
to keep any of these (for example if you want to use `features/users_crud.feature` as example for your test suites),
then **do not run this command!**
```shell
make clean
```

### Regular:

![Usage example](usage_2.gif)

Following commands run from local terminal in main project directory:

##### Running **all tests** directly by `godog` CLI

```
godog
```

##### Running **all tests** from console using **go** binary:

```
go test
```

##### Run **single test** directly by `godog` CLI

```
godog features/users_crud.feature
```

##### Run tests with parallelization (many at once)

```
godog --concurrency=X --format=progress
```
where X is level of concurrency (int)